# 事物管理

## 引入依赖

spring-jdbc会自动依赖spring-tx

```xml
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>5.2.1.RELEASE</version>
</dependency>
```



## 创建数据源

```xml
<bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource">
    <property name="url" value="jdbc:mysql://localhost:3306/student"/>
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="username" value="root"/>
    <property name="password" value="123456"/>
</bean>
```



## 创建事物管理器

```xml
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean>
```



## 开启注解事物

```xml
<tx:annotation-driven transaction-manager="transactionManager"/>
```



## 使用注解

使用`Transactional`注解，加在方法上，所有的方法都带有事物，也可直接加在方法上

```java
@Service
@Transactional
public class StudentServiceImpl implements StudentService {

    @Autowired
    private StudentMapper studentMapper;

    @Override
    public List<Student> selectStudent() {
        return studentMapper.selectStudent();
    }
}
```

